# 20. Paging: Smaller Tables
###### tags: `OSTEP`


> curx: how to make page tables smaller?
> Simple array-based page tables (usually called linear page tables) are too big, taking up far too much memory on typical systems. How can we make page tables smaller? What are the key ideas? What inefficiencies arise as a result of these new data structures?

## Solution: Bigger Pages
If each of the page is bigger, there are a lesser amount of pages that exist for a given memory in total. 

### Example
32 bit address space
16KB page size (over 4KB page size)
this allows for $log_2(16K) = log_2(16\times 1024) = 14$ pages, and $32-14=18$ bits remain for assigning VPNs.

We now have $2^{18}$ entries in the linear page table. Since each entry costs $4$ bytes, we have $4\times 2^{18} = 2^{20} = 1MB$ total size. This is a reduction by a factor of $4$, which is what we'd expect, for a $\times 4$ page size

### Issues
The issue is simple, as we had seen back in **segmentation**. The problem of *internal fragmentation*.

## Solution 2: Hybrid Approch: Paging + Segments
- Recall
    - Paging: one page table for the entire address space of a process
    - Segments: splitting the process in three parts (code, heap, stack) and then assigning different **base-bound** registers. (note that we consider the original case of all of them taking as in a contiguous memory space)

Now, we have the **base register** store the **physical address** of the **page table** *of that segment* (yes, there are now 3). The **bound register** indicates the **end** of the page table.

### Example
32 bit VAS
4KB pages
4 segment split (we use only three in this example, code, stack, heap)

![](https://i.imgur.com/ygD6jPR.png)
![](https://i.imgur.com/2EYu1lF.png)

As I mentioned, we now have 3 pairs of base-bound registers, instead of just one.

### Issues
As we discussed in segmentation, there is still unused space in between a page table.

To add, we now have extrenal fragmentation again, since allocation becomes a pain

## Solution 3: Multi-Level Page Tables
to be added
